<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HindiHub4u - Stream Movies Free</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0F172A;
            --card: #1E293B;
            --accent: #38BDF8;
            --text: #F8FAFC;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
        }

        /* Header & Search */
        header {
            background: rgba(15, 23, 42, 0.98);
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #334155;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        .logo { font-size: 2rem; font-weight: 700; margin-bottom: 10px; letter-spacing: 1px; }
        .logo span { color: var(--accent); }

        .search-wrapper { position: relative; max-width: 500px; margin: auto; }
        
        #searchBar {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: 2px solid #334155;
            background: var(--card);
            color: white;
            outline: none;
            font-size: 1rem;
            transition: 0.3s;
        }

        #searchBar:focus { border-color: var(--accent); }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            gap: 12px;
            padding: 20px;
            flex-wrap: wrap;
        }

        nav button {
            background: var(--card);
            border: 1px solid #334155;
            color: #94A3B8;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: 0.3s;
        }

        nav button:hover, nav button.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
            font-weight: 700;
        }

        /* Loading Spinner */
        #loader {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
            color: var(--accent);
        }

        /* Movie Grid */
        #movieGrid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 24px;
            padding: 20px;
            max-width: 1200px;
            margin: auto;
            min-height: 60vh;
        }

        .movie-card {
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .movie-card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
        }

        .movie-card img { width: 100%; height: 240px; object-fit: cover; }

        .movie-info { padding: 12px; text-align: center; }
        .movie-info h4 { 
            font-size: 0.95rem; 
            margin-bottom: 5px; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
            color: #fff;
        }
        .movie-info p { font-size: 0.75rem; color: #94A3B8; }

        .badge {
            position: absolute;
            top: 10px; right: 10px;
            background: var(--accent);
            color: #000;
            padding: 3px 8px;
            font-size: 0.7rem;
            font-weight: 800;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        /* Video Player Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--card);
            width: 95%;
            max-width: 900px;
            padding: 0;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .modal-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #111827;
        }

        .modal-header h3 { margin: 0; font-size: 1.1rem; color: var(--accent); }
        
        .close-btn { 
            font-size: 28px; 
            cursor: pointer; 
            color: #fff; 
            line-height: 1;
        }
        .close-btn:hover { color: var(--accent); }

        .iframe-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            background: #000;
        }

        .iframe-container iframe {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            border: none;
        }

        .modal-footer {
            padding: 15px;
            text-align: center;
            font-size: 0.8rem;
            color: #64748B;
        }

        footer { text-align: center; padding: 40px 20px; color: #64748B; font-size: 0.9rem; border-top: 1px solid #334155; margin-top: 40px; }

        @media (max-width: 600px) {
            #movieGrid { grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 15px; }
            .movie-card img { height: 200px; }
            .logo { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo">HindiHub<span>4u</span></div>
    <div class="search-wrapper">
        <input type="text" id="searchBar" onkeyup="searchMovies()" placeholder="Search movies, year...">
    </div>
</header>

<nav id="navBar">
    <button class="active" onclick="filterCat('all', this)">All Movies</button>
    <button onclick="filterCat('Bollywood', this)">Bollywood</button>
    <button onclick="filterCat('Hollywood', this)">Hollywood</button>
    <button onclick="filterCat('South', this)">South Movies</button>
    <button onclick="filterCat('WebSeries', this)">Web Series</button>
</nav>

<div id="loader">Loading movies...</div>
<div id="movieGrid"></div>

<div id="videoModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="playerTitle">Movie Title</h3>
            <span class="close-btn" onclick="closeModal()">&times;</span>
        </div>
        <div class="iframe-container" id="playerWrapper">
            </div>
        <div class="modal-footer">
            Server: VidSrc (Auto-Embed)
        </div>
    </div>
</div>

<footer>
    <p>&copy; 2026 HindiHub4u. Powered by OMDb & VidSrc.</p>
</footer>

<script>
    // ðŸ”¥ CONFIGURATION ðŸ”¥
    const OMDB_API_KEY = 'c24f4e30'; 
    const CSV_FILE_PATH = './movies.csv'; // Local file path

    // Global variables
    let allMovies = []; 

    async function initWebsite() {
        const loader = document.getElementById('loader');
        const grid = document.getElementById('movieGrid');
        
        loader.style.display = 'block';

        try {
            // 1. Fetch Local CSV File
            const response = await fetch(CSV_FILE_PATH);
            
            if (!response.ok) {
                throw new Error("CSV File not found! Check if movies.csv exists.");
            }

            const csvText = await response.text();
            
            // 2. Parse CSV (Remove header row)
            const rows = csvText.split('\n').slice(1); 

            // 3. Process each row
            for (let row of rows) {
                const cols = row.split(',');
                if (cols.length < 2) continue; // Skip empty rows

                const imdbId = cols[0].trim();
                const category = cols[1].trim(); 
                const quality = cols[2] ? cols[2].trim() : 'HD';

                if(imdbId) {
                    await fetchAndCreateCard(imdbId, category, quality);
                }
            }

        } catch (error) {
            console.error(error);
            grid.innerHTML = `<p style="text-align:center; color: #ff4d4d;">Error: ${error.message}</p>`;
        } finally {
            loader.style.display = 'none';
        }
    }

    async function fetchAndCreateCard(imdbId, category, quality) {
        try {
            const res = await fetch(`https://www.omdbapi.com/?i=${imdbId}&apikey=${OMDB_API_KEY}`);
            const data = await res.json();

            if (data.Response === "True") {
                const grid = document.getElementById('movieGrid');
                
                // Create Card Element
                const card = document.createElement('div');
                card.className = `movie-card ${category}`; // Add category class for filtering
                card.setAttribute('data-title', data.Title.toLowerCase());
                card.setAttribute('data-year', data.Year);

                const posterUrl = data.Poster !== 'N/A' ? data.Poster : 'https://via.placeholder.com/300x450?text=No+Poster';

                card.innerHTML = `
                    <span class="badge">${quality}</span>
                    <img src="${posterUrl}" loading="lazy" alt="${data.Title}">
                    <div class="movie-info">
                        <h4>${data.Title}</h4>
                        <p>${data.Year} â€¢ ${category}</p>
                    </div>
                `;

                // Auto-Embed Click Event
                card.onclick = () => playMovie(data.Title, imdbId, category);
                
                grid.appendChild(card);
            }
        } catch (err) {
            console.log("Error loading ID:", imdbId, err);
        }
    }

    // ðŸŽ¥ Player Logic (VidSrc Auto-Embed)
    function playMovie(title, imdbId, category) {
        const modal = document.getElementById('videoModal');
        const titleElem = document.getElementById('playerTitle');
        const playerWrap = document.getElementById('playerWrapper');

        titleElem.innerText = `Now Playing: ${title}`;
        
        // Auto-detect Series vs Movie
        let embedUrl;
        if (category.toLowerCase().includes('webseries') || category.toLowerCase().includes('series')) {
            embedUrl = `https://vidsrc.to/embed/tv/${imdbId}/1/1`; // S1-E1 Default
        } else {
            embedUrl = `https://vidsrc.to/embed/movie/${imdbId}`;
        }

        playerWrap.innerHTML = `<iframe src="${embedUrl}" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
        modal.style.display = 'flex';
    }

    function closeModal() {
        const modal = document.getElementById('videoModal');
        const playerWrap = document.getElementById('playerWrapper');
        
        modal.style.display = 'none';
        playerWrap.innerHTML = ''; // Stop Audio
    }

    // ðŸ” Search Logic (Checked: Working)
    function searchMovies() {
        let input = document.getElementById('searchBar').value.toLowerCase();
        let cards = document.getElementsByClassName('movie-card');
        
        for (let card of cards) {
            let title = card.getAttribute('data-title');
            let year = card.getAttribute('data-year');
            
            if (title.includes(input) || year.includes(input)) {
                card.style.display = "block";
            } else {
                card.style.display = "none";
            }
        }
    }

    // ðŸ“‚ Filter Logic (Checked: Working)
    function filterCat(category, btnElement) {
        let buttons = document.querySelectorAll('nav button');
        buttons.forEach(btn => btn.classList.remove('active'));
        btnElement.classList.add('active');

        let cards = document.getElementsByClassName('movie-card');
        
        for (let card of cards) {
            if (category === 'all') {
                card.style.display = "block";
            } else {
                if (card.classList.contains(category)) {
                    card.style.display = "block";
                } else {
                    card.style.display = "none";
                }
            }
        }
    }

    window.onclick = function(event) {
        let modal = document.getElementById('videoModal');
        if (event.target == modal) closeModal();
    }

    initWebsite();

</script>
</body>
</html>
